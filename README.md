# 更新

1. 现在默认遇到gif的动图时会压缩成动图以确保其在网页上预览时是动态的。通过添加`preview_anime`>
配置并将其设置为`false`可以禁用此功能，通过添加`anime_max_size`配置项可以手动地对动图单独指定>压缩后的尺寸。该尺寸限制了图片的最长边，以像素为单位
2. 配置文件中用户可手动添加`image_folder`项，此项用于修改图库文件夹为其他路径                 3. 在多核心cpu上充分利用所有核心来加快缩略图压缩速度
4. 优化网页加载性能，现在在遇到每页几千张图片的巨大图库前端也不会卡，不过目前整体体验仍存在卡>
的问题， 因为后端也有其他的性能问题                                                      5. 修复了点击查看全屏图片时，会短暂地全屏显示上次全屏看过的图片的问题
6. 现在日志可以显示日期了

# 协助者注意

提交更新或修补请push到patch分支中，并在分支的readme开头“更新”板块下按1、2、3的顺序写上本次推送的更新内容（方便后面合并main后修改main的readme），我会定期检查patch分支并合并到main中，并同步更新新的release包，谢谢您的协助与配合

# 简易图片库

Main主分支更新了！（再次一晚上更新两次）本次更新内容如下：

1.现在自动生成的config.yml文件可以修改每页显示的图片数量了。详情见如何使用下的第九条。

2.这里非常感谢协作者：minimouse的努力，修复了疑似隐藏了很久的js运行顺序问题，从而成功修复了这次因为更新后端而显现出来的懒加载失效的问题。

## 更新预告

1.由于网站采用了瀑布流布局来更美观地显示图片，所以原有的分页功能有必要被更适配瀑布流布局的“无限下滑”所取代，敬请期待……

## 仍有不足

网页布局仍存在问题，正在和合作者商量下一步改进相关的事。

## 简介

这是一个基于 Flask 后端框架和 Waitress WSGI 服务器的简易网页图片库，可以将存在本地固定路径的图片展示在页面上，并提供全屏原图查看和原图的下载。

## 如何使用

1. 下载项目源代码并解压到合适位置
2. 确保设备已经正确安装并配置了Python环境
3. 为了防止与系统中的其他pip包发生冲突，建议为项目**创建虚拟环境**
4. 如果第一次使用本软件，请在项目根目录执行`pip install -r requirements.txt`安装必要的运行前置。使用时需要虚拟环境，请**先激活虚拟环境**再执行命令
6. 将需要展示的图片放在`static/images`文件夹中。
7. 在项目的根目录启动终端，如果你需要使用虚拟环境运行，请先激活虚拟环境。然后执行：
```sh
python3 app.py
```
或
```sh
python app.py
```

即可运行后端。

（注意：第一次或后续有新增图片后开启后端时会初始化一段时间，此时Pillow正在按预设压缩图片，压缩后的图片为80%质量的webp图像，保存在：  static/compressed_images 文件夹中。）

8. 随后即可从 `localhost:5000` `127.0.0.1:5000` `[::]:5000` 或公网IP访问网页。
9. 启动后端自动生成的config.yml文件可用于快捷修改服务器端口和网页每页显示的图片数目。

其中端口直接修改  “port：”  后的数字即可，请确保新端口未被占用。

至于每页显示图片数量，由于更新后此功能将被去掉，所以要使用需自己在  “bind_ip: '*'”
  最后回车添加一行并加上
  ```yml
  per_page: 
```
在:后添加自定义的数字即可。

## 其他事项

本代码包附带了一张背景图片，位于`/static/background/`中
如需自定义可以将新图片的名字改为和现在一样（leaves.webp）

也可以到`/static/css/`中修改css的这个部分：

```css
/* 设置背景图片 */
body {
    /* background/后的文件名 */
    background-image: url('/static/background/leaves.webp');
}
```

修改成实际图片的名字即可。
